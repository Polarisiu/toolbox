#!/bin/bash
# 命令行美化工具（root@host:~# 格式，: 和 # 可彩色，无空格）

CONFIG_FILE="$HOME/.bashrc"
[ -n "$ZSH_VERSION" ] && CONFIG_FILE="$HOME/.zshrc"

apply_prompt() {
    local ps1="$1"
    sed -i '/^PS1=/d' "$CONFIG_FILE"
    echo "PS1=$ps1" >> "$CONFIG_FILE"
    eval "PS1=$ps1"
    echo -e "\033[32m✅ 已应用新命令行样式，重启终端可永久生效\033[0m"
    read -p "按回车返回菜单..."
}

while true; do
    echo "=======命令行美化工具======="
    echo -e "1. \033[1;32mroot\033[0m\033[1;33m@\033[0m\033[1;34m\h\033[0m\033[1;36m:\033[0m\033[1;31m~\033[0m\033[1;35m#\033[0m"
    echo -e "2. \033[1;35mroot\033[0m\033[1;33m@\033[0m\033[1;36m\h\033[0m\033[1;34m:\033[0m\033[1;33m~\033[0m\033[1;31m#\033[0m"
    echo -e "3. \033[1;31mroot\033[0m\033[1;33m@\033[0m\033[1;32m\h\033[0m\033[1;36m:\033[0m\033[1;34m~\033[0m\033[1;36m#\033[0m"
    echo -e "4. \033[1;36mroot\033[0m\033[1;33m@\033[0m\033[1;33m\h\033[0m\033[1;35m:\033[0m\033[1;37m~\033[0m\033[1;32m#\033[0m"
    echo -e "5. \033[1;37mroot\033[0m\033[1;33m@\033[0m\033[1;31m\h\033[0m\033[1;36m:\033[0m\033[1;32m~\033[0m\033[1;36m#\033[0m"
    echo -e "6. \033[1;33mroot\033[0m\033[1;33m@\033[0m\033[1;34m\h\033[0m\033[1;36m:\033[0m\033[1;35m~\033[0m\033[1;37m#\033[0m"
    echo -e "7. root@\h:~# (默认无颜色)"
    echo "0. 退出"
    read -e -p "输入你的选择: " choice

    case $choice in
      1) apply_prompt "'\[\033[1;32m\]\u\[\033[0m\]\[\033[1;33m\]@\[\033[0m\]\[\033[1;34m\]\h\[\033[0m\]\[\033[1;36m\]:\[\033[0m\]\[\033[1;31m\]\w\[\033[0m\]\[\033[1;35m\]#\[\033[0m\]'" ;;
      2) apply_prompt "'\[\033[1;35m\]\u\[\033[0m\]\[\033[1;33m\]@\[\033[0m\]\[\033[1;36m\]\h\[\033[0m\]\[\033[1;34m\]:\[\033[0m\]\[\033[1;33m\]\w\[\033[0m\]\[\033[1;31m\]#\[\033[0m\]'" ;;
      3) apply_prompt "'\[\033[1;31m\]\u\[\033[0m\]\[\033[1;33m\]@\[\033[0m\]\[\033[1;32m\]\h\[\033[0m\]\[\033[1;36m\]:\[\033[0m\]\[\033[1;34m\]\w\[\033[0m\]\[\033[1;36m\]#\[\033[0m\]'" ;;
      4) apply_prompt "'\[\033[1;36m\]\u\[\033[0m\]\[\033[1;33m\]@\[\033[0m\]\[\033[1;33m\]\h\[\033[0m\]\[\033[1;35m\]:\[\033[0m\]\[\033[1;37m\]\w\[\033[0m\]\[\033[1;32m\]#\[\033[0m\]'" ;;
      5) apply_prompt "'\[\033[1;37m\]\u\[\033[0m\]\[\033[1;33m\]@\[\033[0m\]\[\033[1;31m\]\h\[\033[0m\]\[\033[1;36m\]:\[\033[0m\]\[\033[1;32m\]\w\[\033[0m\]\[\033[1;36m\]#\[\033[0m\]'" ;;
      6) apply_prompt "'\[\033[1;33m\]\u\[\033[0m\]\[\033[1;33m\]@\[\033[0m\]\[\033[1;34m\]\h\[\033[0m\]\[\033[1;36m\]:\[\033[0m\]\[\033[1;35m\]\w\[\033[0m\]\[\033[1;37m\]#\[\033[0m\]'" ;;
      7) apply_prompt "'\u@\h:\w#'" ;;   # 默认无颜色，无空格
      0) break ;;
      *) echo "无效选择"; read -p "按回车返回菜单..." ;;
    esac
done
